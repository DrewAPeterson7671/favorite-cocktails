<h2>Search for Cocktails</h2>

<%= @last_result %>

<div class='search'>
  <%= form_tag(search_page_path, method: :get) do %>
      <%= text_field_tag(:search, params[:search]) %>
    <%= button_tag "Search", :class => 'btn search-button', :name => nil %>
  <% end %> 
</div>  

<div class='card-grid'>
    <% if @drinks && @drinks.any? %>
      <% @drinks["drinks"].each do |drink| %>
        <div class='card'>
          <%= image_tag drink["strDrinkThumb"], :class => 'drink-thumb' %>
          <div class='card-name'>
            <h3><%= link_to drink["strDrink"], {:controller => 'pages', :action => 'show' }, :class => 'show', remote: true %></h3>
          </div>
          <div class='card-ingredients'>
            <div class='card-hidden-text'>
              <h4><strong>Ingredients:</strong></h4>
            </div>
            <% i = 1 %>
            <% while !drink["strIngredient" + i.to_s].nil? do %>
              <% if i > 4 %>
                <p><span class='card-hidden-text ingredients-item'><%= drink['strMeasure' << i.to_s] %></span>
                <span class='card-hidden-text ingredients-item'><%= drink['strIngredient' << i.to_s] %></span></p>
              <% else %>
                <p><span class='card-hidden-text ingredients-item'><%= drink['strMeasure' << i.to_s] %></span>
                <span class='ingredients-item'><%= drink['strIngredient' << i.to_s] %></span></p>
              <% end %>
              <% i = i + 1 %>
            <% end %>

            <div class='card-hidden-text'>
              <h4><strong>Instructions:</strong></h4>
                <p><%= drink["strInstructions"] %></p>
              <h4><strong>Glass:</strong></h4>
                <p><%= drink["strGlass"] %></p>
            </div>

          </div>
          

          <div class='card-buttons'>
            <%= link_to 'Details', {:controller => 'pages', :action => 'show' }, :class => 'show', remote: true %>
            <%= link_to "Add Favorite", { :controller => "cocktails", :action => "create", :cocktail => {
              :name => drink["strDrink"], 
              :category => drink["strCategory"], 
              :alcoholic => drink["strAlcoholic"], 
              :glass => drink["strGlass"], 
              :instructions => drink["strInstructions"],
              :ingredient1 => drink["strIngredient1"],
              :ingredient2 => drink["strIngredient2"],
              :ingredient3 => drink["strIngredient3"],
              :ingredient4 => drink["strIngredient4"],
              :ingredient5 => drink["strIngredient5"],
              :ingredient6 => drink["strIngredient6"],
              :ingredient7 => drink["strIngredient7"],
              :ingredient8 => drink["strIngredient8"],
              :ingredient9 => drink["strIngredient9"],
              :ingredient10 => drink["strIngredient10"],
              :ingredient11 => drink["strIngredient11"],
              :ingredient12 => drink["strIngredient12"],
              :ingredient13 => drink["strIngredient13"],
              :ingredient14 => drink["strIngredient14"],
              :ingredient15 => drink["strIngredient15"],
              :measure1 => drink["strMeasure1"],
              :measure2 => drink["strMeasure2"],
              :measure3 => drink["strMeasure3"],
              :measure4 => drink["strMeasure4"],
              :measure5 => drink["strMeasure5"],
              :measure6 => drink["strMeasure6"],
              :measure7 => drink["strMeasure7"],
              :measure8 => drink["strMeasure8"],
              :measure9 => drink["strMeasure9"],
              :measure10 => drink["strMeasure10"],
              :measure11 => drink["strMeasure11"],
              :measure12 => drink["strMeasure12"],
              :measure13 => drink["strMeasure13"],
              :measure14 => drink["strMeasure14"],
              :measure15 => drink["strMeasure15"],
              :api_id_drink => drink["idDrink"], 
              :api_image_url => drink["strDrinkThumb"] }
            }, {:method => :post} %>
          </div>
        </div>
      <% end %>

    <% end %>

</div>










